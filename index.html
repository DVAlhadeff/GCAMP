<!doctype html> 
<html lang="en"> 
  <head> 
    <meta charset="utf-8"> 
    <meta http-equiv="X-UA-Compatible" content="IE=7,IE=9" /> 
    <meta name="viewport" content="initial-scale=1, maximum-scale=1,user-scalable=no"/> 
	<meta name="SKYPE_TOOLBAR" content="SKYPE_TOOLBAR_PARSER_COMPATIBLE" />
	
    <title></title> 
    <link rel="stylesheet" type="text/css" href="http://serverapi.arcgisonline.com/jsapi/arcgis/3.2/js/dojo/dijit/themes/tundra/tundra.css" /> 

	<link href="http://serverapi.arcgisonline.com/jsapi/arcgis/3.2/js/dojo/dijit/themes/tundra/form/Button.css" rel="stylesheet">
	
	<link rel="stylesheet" type="text/css" href="http://serverapi.arcgisonline.com/jsapi/arcgis/3.2/js/dojo/dojox/layout/resources/ExpandoPane.css"/>
    <link rel="stylesheet" type="text/css" href="http://serverapi.arcgisonline.com/jsapi/arcgis/3.2/js/esri/dijit/css/Popup.css" />
	<link rel="stylesheet" type="text/css" href="http://serverapi.arcgisonline.com/jsapi/arcgis/3.2/js/esri/css/esri.css" /> 

    <link rel="stylesheet" type="text/css" href="style.css" /> 
	
    <style>
      #map{ margin: 0; padding: 0; } 
      #footer{ 
        border-top: solid 1px #888; 
        height:55px; 
      } 
    </style> 
    <script>var dojoConfig = { parseOnLoad: true,
		packages : [
			{
				name : "my",
				location : "http://localhost/dijits/my"
			}
		]}; </script> 

	<script src="/bootstrap/js/bootstrap.min.js"></script>
	<script type='text/javascript' src="http://cloud.github.com/downloads/SteveSanderson/knockout/knockout-2.0.0.js"></script>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
	
    <script type="text/javascript" src="http://www.google.com/jsapi?key=ABQIAAAAg58_FLn5bynKiZewfpUCeBTyCV9A2YBg0isNV8i_fASKoO0TiRRYqDCtRVNLgUhnJVaabm69uDjeZg&autoload=%7B%27modules%27%3A%5B%7B%27name%27%3A%27jquery%27%2C%27version%27%3A%271.4.2%27%7D%2C%7B%27name%27%3A%27jqueryui%27%2C%27version%27%3A%271.8.2%27%7D%5D%7D"></script>

    <script src="http://serverapi.arcgisonline.com/jsapi/arcgis/3.2/"></script>

	<link href="/bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen">
	
	<link rel="stylesheet" type="text/css" href="./css/marco_style.css" /> 
	
	<script src='attributes.js'> </script>
	<script src='visibility.js'> </script>
	<script src='query.js'> </script>
    <script src='main.js'> </script>
  </head> 
 
<body class="tundra">
	<div data-dojo-type="dijit.layout.BorderContainer" 
		data-dojo-props="design:'headline',gutters:false" 
		style="width: 100%; height: 100%; margin: 0;">
		
		<div id="titlePane" data-dojo-type="dijit.layout.ContentPane"data-dojo-props="region:'top'" >
			<img style='float: left' src='http://georgia.gov/profiles/georgiagov/themes/gagov/logo.png' alt='Georgia.gov Logo'/>
			<div id='GABranding' style=''>Coastal Dataset Viewer</div>
		</div>
		<div data-dojo-type="dijit.layout.ContentPane"data-dojo-props="region:'top'">
			<div id="navToolbar" data-dojo-type="dijit.Toolbar" class="toolbar">
	  			<div dojotype="dijit.form.Button" id="zoomfullext" iconclass="zoomfullextIcon" onclick="fullExtent();" title="Full Extent">Zoom out to full-extent</div>
	    		<div dojotype="dijit.form.Button" id="zoomprev"	   iconclass="zoomprevIcon" onClick="navToolbar.zoomToPrevExtent();" title="Zoom Previous">Go back</div>
				<div dojotype="dijit.form.Button" id="zoomnext"    iconclass="zoomnextIcon" onClick="navToolbar.zoomToNextExtent();" title="Zoom Next"> Go forward</div>
				<div dojotype="dijit.form.Button" id="pan"         iconclass="zoompan" onClick="drawToolbar.deactivate(); navToolbar.activate(esri.toolbars.Navigation.PAN);" title="Pan">Pan</div>
			</div>
			<div id="drawToolbar" data-dojo-type="dijit.Toolbar" class="toolbar">
				<div dojotype="dijit.form.Button" id="identify"	 iconclass="identify" title="Identify"
					onClick="drawToolbar.activate(esri.toolbars.Draw.POLYGON); map.hideZoomSlider();">Identify</div>			
				<div dojotype="dijit.form.Button" id="identify_sum"	 iconclass="identify" title="Identify - Summarize by Field"
					onClick="drawToolbar.activate(esri.toolbars.Draw.POLYGON); map.hideZoomSlider();">Identify - Summarize by Field</div>
			</div>
			
			<div id='lyrTypeTabController' style='height: 36pt; margin-left: 10%; width: 80%;'>
				<form>
					<div data-dojo-type="dijit.form.HorizontalSlider" id='MapType'
						 data-dojo-props="discreteValues: 4"> 					</div>
						 <ol data-dojo-type="dijit.form.HorizontalRuleLabels" container="topDecoration"
							style="height:1.5em;font-size:125%;color:gray;">
							<li>All Layers</li>
							<li>On-Shore</li>
							<li>Coastal</li>
							<li>Ocean</li>
						  </ol>
				</form>
			</div>		
		</div>
		<div data-dojo-type="dojox.layout.ExpandoPane"
			 data-dojo-props="title: 'Information', maxWidth:200, maxHeight:700, splitter:false, region:'leading'"
			 style='' id='LeftExPanel' preload='false'>
			<div dojoType='dijit.layout.TabContainer'
				  tabPosition='right' tabStrip='false' id='LeftTabs'>
				<div dojoType='dojox.layout.ContentPane' tooltip="Layers" id='layersSection'
					iconClass='Layers-icon'>
	<div style=''>
		<div class='accordion' id='layersVisibList'  data-bind="template: {name: 'layers_template', foreach: return_map_layers() }"></div>

		<script type="text/html" id="layers_template">
			<!-- ko if: (children.length > 0) -->
				<div class='accordion-heading' data-bind="click : viewModel.setOpenTheme , css:{'active': true}">
					<div>
						<a class='accordion-toggle'><span data-bind='text: name'> </span> </a>
					</div>
				</div>
				<div class='accordion-body collapse' data-bind="css: {'in': viewModel.isOpenTheme(name) }" style='margin-left: 20px; overflow: scroll;'>
						<div data-bind="template: {name: 'layers_template', foreach: children }"> </div>
				</div>
			<!-- /ko -->
			<!-- ko if: (children.length == 0) -->
				<div class='accordion-inner'>
					<div class='btn-group btn-group-layer'>
						<span class='btn btn-layer' style='padding-top: 0px; margin: 0px;' data-bind='click: viewModel.toggleVisibleLayer'>
							<i class='check icon-large icon-check' data-bind="visible: viewModel.isVisibleLayer(mapLayerId,esriLayer.id)"
								style='padding: 4px; margin: 0px; width: 30px; background-image: url("images/glyphicons_152_check.png"); background-position: 0 0;' ></i>
							<i class='check icon-large icon-check' data-bind="visible: viewModel.isVisibleLayer(mapLayerId,esriLayer.id)==false"
								style='padding: 4px; margin: 0px; width: 30px; background-image: url("images/glyphicons_153_unchecked.png"); background-position: 0 0;' ></i>
						</span>
						<!--a class='btn btn-info-sign'><i class='icon-info-sign icon-large'></i> </a-->
						<span class='btn btn-layer' data-bind='text: name' style='text-align:left; min-width: 12em;'> </span>
					</div>
				</div>
			<!-- /ko -->
		</script>
	</div>	
					<!--ul data-bind='foreach: return_map_layers()'>
						<li>${name}
							<ul data-bind='template: { name: 
						</li>
					</ul-->
				</div>
				<div dojoType='dijit.layout.ContentPane' tooltip='Base Maps' id='layersBaseMap' iconclass='base-layer-icon'>
					<button data-dojo-type="dijit.form.Button" type="button" id='Return1'> Return to Layers Pane
						<script type="dojo/on" data-dojo-event="click" data-dojo-args="evt">
							require(["dojo/dom"], function(dom){
								dijit.byId('LeftTabs').selectChild(dijit.byId('layersSection'));
								toggleIdentifyOn(dijit.byId('LeftExPanel'));
							});
						</script>
					</button>

					<div id="basemapGallery" ></div>
				</div>
				<div dojoType='dijit.layout.ContentPane' tooltip='Other Data...' id='layersAddNew' showLabel='false' iconclass='open-maplayer-icon'>
					<button data-dojo-type="dijit.form.Button" type="button" id='Return2'> Return to Layers Pane
						<script type="dojo/on" data-dojo-event="click" data-dojo-args="evt">
							require(["dojo/dom"], function(dom){
								dijit.byId('LeftTabs').selectChild(dijit.byId('layersSection'));
								toggleIdentifyOn(dijit.byId('LeftExPanel'));
							});
						</script>
					</button>

					<h2>Available Map Services</h2>
					
					<div id='SelectMapLayer'>
					</div>
					
					<button data-dojo-type="dijit.form.Button" type="button" id='MapSrvInfo'> Get Information
						<script type="dojo/on" data-dojo-event="click" data-dojo-args="evt">
							require(["dojo/dom"], function(dom){
							});
						</script>
					</button>

					<button data-dojo-type="dijit.form.Button" type="button" id='MapSrvRemove'> Remove Service
						<script type="dojo/on" data-dojo-event="click" data-dojo-args="evt">
							require(["dojo/dom"], function(dom){
								var s = dijit.byId('SelectMapLayer');
								removeLayerFromMap(s,s.getValue());
							});
						</script>
					</button>

					<h3 style='margin-top: 20px;'>Add Map Service</h3>
					<table>
						<tr><td><strong>Label:</strong></td><td><input id='AddMapSvcLabel' data-dojo-type="dijit.form.ValidationTextBox" /></td></tr>
						<tr><td><strong>URL:</strong></td><td><input id='AddMapSvcURL'   data-dojo-type="dijit.form.ValidationTextBox" /></td></tr>
					</table>

					<div id='SelectMapLayerCatalog'> </div>
					
					<button data-dojo-type="dijit.form.Button" type="button" id='MapSrvAdd'> Add Map Service
						<script type="dojo/on" data-dojo-event="click" data-dojo-args="evt">
							require(["dojo/dom"], function(dom){
								var l = dijit.byId('AddMapSvcLabel').value;
								var u = dijit.byId('AddMapSvcURL').value;
								
								if( l == "" || u == "") {
								}
								else {
									try {
										addLayerToMap(u,l);
									}
									catch(e) {
										console.debug(e);
									}
									
									dijit.byId('AddMapSvcLabel').set("value","");
									dijit.byId('AddMapSvcURL').set("value","");

								}
							});
						</script>
					</button>
				</div>
				<div id='legend' dojoType='dijit.layout.ContentPane' tooltip="Legend" iconclass='map-legend-icon'>
					<button data-dojo-type="dijit.form.Button" type="button" id='Return3'> Return to Layers Pane
						<script type="dojo/on" data-dojo-event="click" data-dojo-args="evt">
							require(["dojo/dom"], function(dom){
								dijit.byId('LeftTabs').selectChild(dijit.byId('layersSection'));
								toggleIdentifyOn(dijit.byId('LeftExPanel'));
							});
						</script>
					</button>
					<div id='legendSection'> </div>
				</div>
				<div id='bottomIDPanel' data-dojo-type='dijit.layout.ContentPane' data-dojo-props='tooltip: "Identify Results"' iconclass="Identify-results" style='width: 250px;' >
					<button data-dojo-type="dijit.form.Button" type="button" id='Return4'> Return to Layers Pane
						<script type="dojo/on" data-dojo-event="click" data-dojo-args="evt">
							require(["dojo/dom"], function(dom){
								dijit.byId('LeftTabs').selectChild(dijit.byId('layersSection'));
								toggleIdentifyOn(dijit.byId('LeftExPanel'));
							});
						</script>
					</button>
					<h2>Left-click on map to retrieve information</h2>
				</div>
				<div id='layerInfoPane' dojoType='dijit.layout.ContentPane' tooltip='Layer Info' iconclass='Information-Icon'>
					<button data-dojo-type="dijit.form.Button" type="button" id='Return5'> Return to Layers Pane
						<script type="dojo/on" data-dojo-event="click" data-dojo-args="evt">
							require(["dojo/dom"], function(dom){
								dijit.byId('LeftTabs').selectChild(dijit.byId('layersSection'));
								toggleIdentifyOn(dijit.byId('LeftExPanel'));
							});
						</script>
					</button>
					
					<!--button data-dojo-type="dijit.form.Button" type="button" id='Return6'> Show Attribute Data
						<script type="dojo/on" data-dojo-event="click" data-dojo-args="evt">
/*							require(["dojo/dom"], function(dom){
								dijit.byId('LeftTabs').selectChild(dijit.byId('layersSection'));
								toggleIdentifyOn(dijit.byId('LeftExPanel'));
							});*/
						</script>
					</button-->
				</div>
			</div>
		</div>
		<div data-dojo-type="dojox.layout.ExpandoPane"
			 data-dojo-props="title: 'Layer Attribute Information', splitter:false, region:'bottom', startExpanded: false"
			 style='width: 100%; height: 20em;' id='RightExPanel'>
					
			<div id='attributesPanel' data-dojo-type='dojox.layout.ContentPane' tooltip='Attribute Table'>
					<!--button data-dojo-type="dijit.form.Button" type="button" id='Return8'> Return to Layers Panel
						<script type="dojo/on" data-dojo-event="click" data-dojo-args="evt">
							require(["dojo/dom"], function(dom){
								dijit.byId('LeftTabs').selectChild(dijit.byId('layersSection'));
								toggleIdentifyOn(dijit.byId('LeftExPanel'));
							});
						</script>
					</button-->
					<div id='SelectMapLayerAttributes'> </div>
					<div id="gridDiv" style=''>
					</div>
				</div>
		</div>
			
		<!--/div-->

		<div id="map" data-dojo-type="dijit.layout.ContentPane"data-dojo-props="region:'center'">
			<div id='status' style=''>Seeing&nbsp;if&nbsp;there's&nbsp;more&nbsp;information... </div>

		</div>
	</div>
	<!--div id='paneTitleRight' style=''>Legend/Information</div-->
	<div id='paneTitleLeft' style=''>Layers</div>
	</body> 
<script>
	//dojo.ready(init);
</script>
</html> 
